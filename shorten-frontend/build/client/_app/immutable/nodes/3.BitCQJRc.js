import{R as He,g as be}from"../chunks/7lrU0nzN.js";import{a as D,f as H,t as he}from"../chunks/CgIzCHWt.js";import{o as Pe,g as ae}from"../chunks/BllHz6Nw.js";import{h as M,D as oe,Z as Ue,o as se,z as Ye,y as Je,g as i,A as Ke,B as Ve,C as me,F as ne,v as X,a6 as qe,aG as Ge,av as _e,j as Qe,u as ce,aI as Xe,x as Ze,aJ as je,aK as We,aF as ue,aL as et,ah as ye,aM as tt,aN as rt,M as at,aO as z,k as Ee,m as Te,aP as le,aQ as ot,aD as st,l as nt,a7 as lt,p as it,d as B,aR as dt,t as ie,a as ft,c as x,b as E,s as _,r as p}from"../chunks/BQNkOFaZ.js";import{d as ct,a as J,s as O}from"../chunks/DXC2exyq.js";import{i as de,s as vt,a as ut}from"../chunks/lq4UHFV3.js";import{r as pt,s as xt}from"../chunks/CpoaiWnb.js";import{b as gt,a as bt,c as ht,B as K,d as fe,t as we}from"../chunks/ChdntlBo.js";function mt(e,s){return s}function _t(e,s,n){for(var g=[],h=s.length,l,f=s.length,a=0;a<h;a++){let v=s[a];Te(v,()=>{if(l){if(l.pending.delete(v),l.done.add(v),l.pending.size===0){var m=e.outrogroups;ve(ue(l.done)),m.delete(l),m.size===0&&(e.outrogroups=null)}}else f-=1},!1)}if(f===0){var c=g.length===0&&n!==null;if(c){var r=n,u=r.parentNode;st(u),u.append(r),e.items.clear()}ve(s,!c)}else l={pending:new Set(s),done:new Set},(e.outrogroups??=new Set).add(l)}function ve(e,s=!0){for(var n=0;n<e.length;n++)nt(e[n],s)}var ke;function yt(e,s,n,g,h,l=null){var f=e,a=new Map;{var c=e;f=M?oe(Ue(c)):c.appendChild(se())}M&&Ye();var r=null,u=je(()=>{var b=n();return We(b)?b:b==null?[]:ue(b)}),v,m=!0;function L(){C.fallback=r,wt(C,v,f,s,g),r!==null&&(v.length===0?(r.f&z)===0?Ee(r):(r.f^=z,q(r,null,f)):Te(r,()=>{r=null}))}var t=Je(()=>{v=i(u);var b=v.length;let T=!1;if(M){var y=Ke(f)===Ve;y!==(b===0)&&(f=me(),oe(f),ne(!1),T=!0)}for(var N=new Set,w=Qe,R=Ze(),$=0;$<b;$+=1){M&&X.nodeType===qe&&X.data===Ge&&(f=X,T=!0,ne(!1));var F=v[$],k=g(F,$),S=m?null:a.get(k);S?(S.v&&_e(S.v,F),S.i&&_e(S.i,$),R&&w.unskip_effect(S.e)):(S=kt(a,m?f:ke??=se(),F,k,$,h,s,n),m||(S.e.f|=z),a.set(k,S)),N.add(k)}if(b===0&&l&&!r&&(m?r=ce(()=>l(f)):(r=ce(()=>l(ke??=se())),r.f|=z)),b>N.size&&Xe(),M&&b>0&&oe(me()),!m)if(R){for(const[P,U]of a)N.has(P)||w.skip_effect(U.e);w.oncommit(L),w.ondiscard(()=>{})}else L();T&&ne(!0),i(u)}),C={effect:t,items:a,outrogroups:null,fallback:r};m=!1,M&&(f=X)}function V(e){for(;e!==null&&(e.f&ot)===0;)e=e.next;return e}function wt(e,s,n,g,h){var l=s.length,f=e.items,a=V(e.effect.first),c,r=null,u=[],v=[],m,L,t,C;for(C=0;C<l;C+=1){if(m=s[C],L=h(m,C),t=f.get(L).e,e.outrogroups!==null)for(const k of e.outrogroups)k.pending.delete(t),k.done.delete(t);if((t.f&z)!==0)if(t.f^=z,t===a)q(t,null,n);else{var b=r?r.next:a;t===e.effect.last&&(e.effect.last=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),I(e,r,t),I(e,t,b),q(t,b,n),r=t,u=[],v=[],a=V(r.next);continue}if((t.f&le)!==0&&Ee(t),t!==a){if(c!==void 0&&c.has(t)){if(u.length<v.length){var T=v[0],y;r=T.prev;var N=u[0],w=u[u.length-1];for(y=0;y<u.length;y+=1)q(u[y],T,n);for(y=0;y<v.length;y+=1)c.delete(v[y]);I(e,N.prev,w.next),I(e,r,N),I(e,w,T),a=T,r=w,C-=1,u=[],v=[]}else c.delete(t),q(t,a,n),I(e,t.prev,t.next),I(e,t,r===null?e.effect.first:r.next),I(e,r,t),r=t;continue}for(u=[],v=[];a!==null&&a!==t;)(c??=new Set).add(a),v.push(a),a=V(a.next);if(a===null)continue}(t.f&z)===0&&u.push(t),r=t,a=V(t.next)}if(e.outrogroups!==null){for(const k of e.outrogroups)k.pending.size===0&&(ve(ue(k.done)),e.outrogroups?.delete(k));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||c!==void 0){var R=[];if(c!==void 0)for(t of c)(t.f&le)===0&&R.push(t);for(;a!==null;)(a.f&le)===0&&a!==e.fallback&&R.push(a),a=V(a.next);var $=R.length;if($>0){var F=l===0?n:null;_t(e,R,F)}}}function kt(e,s,n,g,h,l,f,a){var c=(f&tt)!==0?(f&rt)===0?at(n,!1,!1):ye(n):null,r=(f&et)!==0?ye(h):null;return{v:c,i:r,e:ce(()=>(l(s,c??n,r??h,a),()=>{e.delete(g)}))}}function q(e,s,n){if(e.nodes)for(var g=e.nodes.start,h=e.nodes.end,l=s&&(s.f&z)===0?s.nodes.start:n;g!==null;){var f=lt(g);if(l.before(g),g===h)return;g=f}}function I(e,s,n){s===null?e.effect.first=n:s.next=n,n===null?e.effect.last=s:n.prev=s}function Et(e,s){return e==null?null:String(e)}function Tt(e,s,n,g){var h=e.__style;if(M||h!==s){var l=Et(s);(!M||l!==e.getAttribute("style"))&&(l==null?e.removeAttribute("style"):e.style.cssText=l),e.__style=s}return g}function St(e,s){throw new He(e,s.toString())}const Ct=!1;function At(){localStorage.getItem("token")||St(302,"/")}const Yt=Object.freeze(Object.defineProperty({__proto__:null,load:At,ssr:Ct},Symbol.toStringTag,{value:"Module"}));var $t=H('<p class="font-mono text-xs text-red-500 font-bold mt-3"> </p>'),Lt=H('<div class="font-mono text-sm text-center py-12" style="color: var(--text-muted);">Loading...</div>'),Nt=H('<div class="p-12 text-center" style="background: var(--card-bg); border: 2.5px solid var(--border); box-shadow: 5px 5px 0 var(--border);"><p class="font-mono text-sm font-bold uppercase tracking-widest" style="color: var(--text-muted);">// No links yet</p> <p class="font-mono text-xs mt-2" style="color: var(--text-muted);">Create your first short link above</p></div>'),Rt=H('<div class="p-5 flex items-center justify-between gap-4 transition-all" style="background: var(--card-bg); border: 2.5px solid var(--border); box-shadow: 5px 5px 0 var(--border);"><div class="flex flex-col gap-1 min-w-0"><a target="_blank" rel="noopener noreferrer" class="font-mono text-sm font-bold text-orange-500 hover:underline"> </a> <p class="text-sm truncate" style="color: var(--text-muted);"> </p> <p class="font-mono text-xs" style="color: var(--text-muted);"> </p></div> <div class="flex items-center gap-4 shrink-0"><div class="text-center"><p class="font-mono text-xs uppercase tracking-widest" style="color: var(--text-muted);">Clicks</p> <p class="font-mono text-lg font-bold"> </p></div> <button class="font-mono text-xs font-bold uppercase tracking-widest px-3 py-2 transition-all"> </button> <button class="font-mono text-xs font-bold uppercase tracking-widest px-3 py-2 hover:bg-red-500 hover:text-white transition-all" style="border: 2px solid var(--border);">Delete</button></div></div>'),Dt=H('<div class="flex flex-col gap-3"></div>'),It=H('<div class="min-h-screen" style="background: var(--bg); color: var(--text);"><nav class="sticky top-0 z-10" style="background: var(--bg); border-bottom: 2.5px solid var(--border);"><div class="max-w-5xl mx-auto px-6 h-16 flex items-center justify-between"><span class="font-mono text-xl font-bold">KSM<span class="text-orange-500">.</span>shorten</span> <div class="flex items-center gap-3"><button class="font-mono text-xs font-bold uppercase tracking-widest px-3 py-2 transition-all" style="border: 2px solid var(--border); color: var(--text);"><!></button> <button class="font-mono text-xs font-bold uppercase tracking-widest px-4 py-2 transition-all" style="border: 2px solid var(--border); color: var(--text);">Logout</button></div></div></nav> <div class="max-w-5xl mx-auto px-6 py-12"><div class="mb-10"><p class="font-mono text-xs font-bold tracking-widest uppercase text-orange-500 mb-2">// Dashboard</p> <h1 class="font-mono text-5xl font-bold leading-none">Your<br/> <span style="-webkit-text-stroke: 2px var(--text); color: transparent;">Links</span></h1></div> <div class="p-6 mb-10" style="background: var(--card-bg); border: 2.5px solid var(--border); box-shadow: 5px 5px 0 var(--border);"><h2 class="font-mono text-sm font-bold uppercase tracking-widest mb-4" style="color: var(--text);">// New Link</h2> <div class="flex gap-3"><input type="url" placeholder="https://example.com" class="flex-1 p-3 font-sans text-sm outline-none transition-all" style="background: var(--bg); border: 2px solid var(--border); color: var(--text);"/> <button class="bg-orange-500 text-white font-mono font-bold text-sm uppercase tracking-widest py-3 px-6 transition-all disabled:opacity-50" style="border: 2.5px solid var(--border); box-shadow: 4px 4px 0 var(--border);"> </button></div> <!></div> <!></div></div>');function Jt(e,s){it(s,!0);const n=()=>ut(we,"$theme",g),[g,h]=vt();let l=B(null);async function f(o,d){await navigator.clipboard.writeText(`${K}/${d}`),E(l,o,!0),setTimeout(()=>E(l,null),2e3)}let a=B(dt([])),c=B(""),r=B(""),u=B(!1),v=B(!1);function m(){ht(),be("/")}async function L(){E(u,!0);try{const o=await fetch(`${K}/api/links`,{headers:{Authorization:`Bearer ${ae(fe)}`}});if(!o.ok)throw new Error("Failed to fetch links");const d=await o.json();E(a,d.data??[],!0)}catch(o){E(r,o.message,!0)}finally{E(u,!1)}}async function t(){if(i(c)){E(v,!0),E(r,"");try{if(!(await fetch(`${K}/api/links`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae(fe)}`},body:JSON.stringify({url:i(c)})})).ok)throw new Error("Failed to create link");E(c,""),await L()}catch(o){E(r,o.message,!0)}finally{E(v,!1)}}}async function C(o){try{if(!(await fetch(`${K}/api/links/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${ae(fe)}`}})).ok)throw new Error("Failed to delete link");await L()}catch(d){E(r,d.message,!0)}}Pe(()=>{if(!localStorage.getItem("token")){be("/");return}we.subscribe(d=>{document.documentElement.setAttribute("data-theme",d)}),L()});var b=It(),T=x(b),y=x(T),N=_(x(y),2),w=x(N),R=x(w);{var $=o=>{var d=he("â˜€ï¸");D(o,d)},F=o=>{var d=he("ðŸŒ™");D(o,d)};de(R,o=>{n()==="dark"?o($):o(F,!1)})}p(w);var k=_(w,2);p(N),p(y),p(T);var S=_(T,2),P=_(x(S),2),U=_(x(P),2),Z=x(U);pt(Z);var G=_(Z,2),Se=x(G,!0);p(G),p(U);var Ce=_(U,2);{var Ae=o=>{var d=$t(),j=x(d);p(d),ie(()=>O(j,`âœ— ${i(r)??""}`)),D(o,d)};de(Ce,o=>{i(r)&&o(Ae)})}p(P);var $e=_(P,2);{var Le=o=>{var d=Lt();D(o,d)},Ne=o=>{var d=Nt();D(o,d)},Re=o=>{var d=Dt();yt(d,21,()=>i(a),mt,(j,A)=>{var W=Rt(),ee=x(W),Q=x(ee),De=x(Q);p(Q);var te=_(Q,2),Ie=x(te,!0);p(te);var pe=_(te,2),Me=x(pe,!0);p(pe),p(ee);var xe=_(ee,2),re=x(xe),ge=_(x(re),2),ze=x(ge,!0);p(ge),p(re);var Y=_(re,2),Fe=x(Y,!0);p(Y);var Oe=_(Y,2);p(xe),p(W),ie(Be=>{xt(Q,"href",`${K}/${i(A).short_code??""}`),O(De,`shorten.krishnasaimarupudi.com/${i(A).short_code??""}`),O(Ie,i(A).original_url),O(Me,Be),O(ze,i(A).clicks??0),Tt(Y,`border: 2px solid var(--border); color: ${i(l)===i(A).id?"#22c55e":"var(--text)"}; border-color: ${i(l)===i(A).id?"#22c55e":"var(--border)"};`),O(Fe,i(l)===i(A).id?"âœ“ Copied!":"Copy")},[()=>new Date(i(A).created_at).toLocaleDateString()]),J("click",Y,()=>f(i(A).id,i(A).short_code)),J("click",Oe,()=>C(i(A).id)),D(j,W)}),p(d),D(o,d)};de($e,o=>{i(u)?o(Le):i(a).length===0?o(Ne,1):o(Re,!1)})}p(S),p(b),ie(()=>{G.disabled=i(v),O(Se,i(v)?"Creating...":"Shorten â†’")}),J("click",w,function(...o){bt?.apply(this,o)}),J("click",k,m),gt(Z,()=>i(c),o=>E(c,o)),J("click",G,t),D(e,b),ft(),h()}ct(["click"]);export{Jt as component,Yt as universal};
